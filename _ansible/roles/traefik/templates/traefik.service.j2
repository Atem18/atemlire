[Unit]
Description=Traefik
After=docker.service
Requires=docker.service

[Service]
Restart=always
ExecStartPre=-/usr/bin/docker kill traefik
ExecStartPre=-/usr/bin/docker rm traefik
ExecStartPre=/usr/bin/docker pull traefik
ExecStart=/usr/bin/docker run --name traefik --network=kmdotnet -p 80:80 -p 443:443 -v /var/run/docker.sock:/var/run/docker.sock -v /etc/traefik/traefik.toml:/traefik.toml -v /etc/traefik/acme.json:/acme.json traefik --docker
ExecStop=/usr/bin/docker stop traefik

[Install]
WantedBy=multi-user.target